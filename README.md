# dopusk-python

Тестовое задание - написать программу на python 3.xx (любая 3 версия) которая выводит на экран данные, необходимые для построения 
диаграммы Тьюки (ящик с усами), оценку математического ожидания, дисперсии. Запрещается использовать любые сторонние модули для расчёта
значений. Так же запрещается использовать встроенные функции сортировки, фильтрации, поиска максимума и минимума. Результатом работы 
должны быть 7 чисел (положение конца левого уса, левая граница ящика, медиана, правая граница ящика, конец правого уса, оценка 
математического ожидания и оценка дисперсии).

# Описание структуры проекта

Проект содержит четыре основных файла. В трёх из них описаны функции (они помещены в тот или иной файл в зависимости от назначения). Четвёртый - main.py - точка входа.
Ниже приведено описание этих файлов и пояснения по поводу определения функций.

## alg.py

Этот файл содержит функции, использующиеся в проекте, но напрямую не связанные с диаграммой Тьюки. 

Первым делом, так как квартили находятся по вариационному ряду,
там описана функция `quicksort(nums)`. Она получает на вход коллекцию (в данном случае список) и применяет алгоритм быстрой сортировки (или, по-другому, Тони Хоара).
Выбранный принцип разбиения - Lomuto partitioning.

Далее, реализованы простейшие алгоритмы поиска минимума и максимума (`custom_min(nums)` и `custom_max(nums)`). Подробно описываться не будут.

Функция нахождения оценки математического ожидания `custom_mean(nums)` возвращает сумму элементов выборки, разделенную на количество. Функция нахождения оценки дисперсии
`custom_var(nums)` сначала вызывает `custom_mean(nums)`, а затем с учетом полученной оценки матожидания рассчитывает дисперсию по классической формуле.

## tukey.py

В этом файле описаны функции, напрямую относящиеся к диаграмме Тьюки.

Задача решена в более общем виде, и описанная функция для нахождения верхнего и нижнего квартиля способна найти любой процентиль.

Первым делом, важно отметить, что существуют различные подходы к вычислению квартилей в вопросе учитывания/неучитывания медианы. Удобнее всего сразу вычислить
её отдельно, чтобы дальше было удобнее. Это делается в функции `custom_median(nums)`, атгоритм тривиален. В моем случае был выбран комбинированный
подход к учёту медианы, а именно: 
* Если выборка содержит нечетное число элементов, то есть медиана - единственное число посередине, то при нахождении квартилей такая медиана исключается из выборки.
Затем в функции `split_sample(nums, p)` она делится на две половины справа и слева от исключенной медианы (это сделано срезами). Далее проверяется, в какой половине
находится искомый процентиль (от 0 до 49 или от 51 до 100). В зависимости от того, какая половина, образно говоря, выбирается направление отсчёта. Выбранная половинка
передается в `num_for_percentile(nums, p)`, где вычисляется индекс процентиля в выборке. Если индекс получился дробным, в качестве процентиля возвращается среднее между
значениями с индексами выше и ниже дробного.
* Если выборка содержит четное число элементов, то есть медиана - среднее между двумя числами посередине, то эти числа не убираются. Выборка просто делится на две
половинки, и дальнейшие действия идентичны вышеописанным.

Функция `anomal_check(nums)` проверяет начилие выбросов и исключает таковые (вызывается только перед построением диаграммы, до этого аномалии не удаляются).

## graph.py

В этом файле есть единственная функция, и она строит диаграмму по посчитанным данным. Диаграмма всегда центрирована, т.е. ось значений Y адаптирует масштаб под выборку.
В функции используется ряд обозначений:
* `lw` - нижний ус (lower whisker)
* `lq` - нижний квартиль (lower quartile)
* `median` - медиана
* `uq` - верхний квартиль (upper quartile)
* `uw` - верхний ус (upper whisker)

Первым делом, строится прямоугольник на основе константной координаты Х центра и константной ширины, а также двух пар верхних и нижних квартилей. Остальные линии рисуются
с помощью метода `.plot(...)`: медиана - горизонталь, соответственно, на уровне медианы, длиной в ширину ящика. Усы - ветрикальные линии по центру, длиной до максимума
и минимума. Черточки на концах усов аналогичны построению медианы.

## main.py

У пользователя запрашивается ввод выборки с клавиатуры, причем значение -1 будет останавливать ввод. Далее на экран выводятся все семь необходимых по ТЗ значений, после
чего у пользователя спрашивают, хочет ли он увидеть диаграмму. Если да, выборка очищается от аномалий и строится график. Если нет, программа завершается.